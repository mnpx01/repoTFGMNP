TCPDUMP (/home/martin/tcpdump) ADAPTACION LLVM

git clone https://github.com/the-tcpdump-group/libpcap.git
cd libpcap && mkdir build && cd build
pip install --break-system-packages --upgrade wllvm && export CC=wllvm && export CXX=wllvm++ && export LLVM_COMPILER=clang && export CMAKE_C_FLAGS="-emit-llvm" && export CMAKE_CXX_FLAGS="-emit-llvm"
sudo apt-get install flex
cmake ..
make
sudo make install
cd ../..

git clone https://github.com/the-tcpdump-group/tcpdump.git
cd tcpdump && mkdir build && cd build
pip install --break-system-packages --upgrade wllvm && export CC=wllvm && export CXX=wllvm++ && export LLVM_COMPILER=clang && export CMAKE_C_FLAGS="-emit-llvm" && export CMAKE_CXX_FLAGS="-emit-llvm"
cmake .. && make && sudo make install




export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH en bashrc OK
Problema persistente tras usar 
	LD_DEBUG=all klee --optimize --libc=uclibc --posix-runtime ./tcpdump.bc -- -i wlp2s0 -> 
		klee: error: symbol lookup error: undefined symbol: pcap_findalldevs (fatal)
		
tcpdump (ejecutable) si contiene a libpcap.so.1, y esta si contiene por ejemplo, a pcap_findalldevs


make VERBOSE=1 para ver traza de compilaciones+enlaces
permisos previos bibliotecas chmod 644 (rw-r--r--)
permisos posteriores bibliotecas chmod 755 (rwxr-xr-x)

#Generamos biblioteca tinyxml2
clang++-13 -fPIC -emit-llvm -c -o tinyxml2.o tinyxml2.cpp
ar cr libtinyxml2.a tinyxml2.o
ranlib libtinyxml2.a

#Compilacion y vinculacion para KLEE (xmltest_klee.cpp incluye las llamadas a KLEE) PARA MATRIX
clang++-13 -fPIC -I/home/kevus/klee-3/include/ -I libtinyxml2.a -c -g -O0 -Xclang -disable-O0-optnone -emit-llvm  xmltest_klee.cpp  -o xmltest_klee.bc
klee --external-calls=all -libc=uclibc -posix-runtime --link-llvm-lib=libtinyxml2.a xmltest_klee.bc
-------------------------------------------------------------------------------------------------------------


TCPDUMP (/home/martin/tcpdump),  ADAPTACION GCOV   PENDIENTE


-------------------------------------------------------------------------------------------------------------


PRUEBAS Klee:
klee --warnings-only-to-file --only-output-states-covering-new --external-calls=all --write-kqueries --optimize --libc=uclibc --posix-runtime -link-llvm-lib=/home/martin/Escritorio/libpcap/build/libpcap.bca -link-llvm-lib=libnetdissect.bca ./tcpdump.bc -- -i wlp2s0 --sym-args 0 2 5

clang++ -fPIC -emit-llvm -c matrix.cc -o matrix.bc

clang++ -I/home/martin/klee/include/ -emit-llvm -c main.cpp -o main.bc

LD_DEBUG=all klee --optimize --libc=uclibc --posix-runtime ./tcpdump.bc -- -i wlp2s0 

    
Los tama침os (en bits) para el argumento -sym-files han sido elegidos en funci칩n de lo considerado respecto a las limitaciones de memoria del equipo actual. Al no tener suficientes recursos computacionales, el aumento de tama침o carece de sentido pues los resultados no son suficientementes eficientes y 칩ptimos.

      
    
    
